(function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("85ec"),n=a.n(r);n.a},"150d":function(e,t,a){},"1af0":function(e,t,a){"use strict";var r=a("2bc5"),n=a.n(r);n.a},"2bc5":function(e,t,a){},"41b8":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e623"),a("e379"),a("5dc8"),a("37e1");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Toolbar"),a("router-view")],1)},s=[],o=a("5530"),i=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{attrs:{dark:"",src:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg"}},[a("v-toolbar-items",[a("v-icon",{staticStyle:{"margin-right":"5%"}},[e._v("mdi-forum")]),a("v-btn",{attrs:{to:"/users",text:""}},[e._v("Users")]),a("v-btn",{attrs:{to:"/forums",text:""}},[e._v("Forums")])],1),a("v-spacer"),a("v-toolbar-items",[e.user.loggedIn?[a("v-btn",{attrs:{text:""},on:{click:function(t){e.enableOptions=!e.enableOptions}}},[e._v(e._s(e.user.data.email))]),e.enableOptions?[a("v-btn",{attrs:{text:""},on:{click:e.signOut}},[e._v("Sign Out")]),a("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteOption=!0}}},[e._v("Delete Account")]),a("v-btn",{attrs:{text:""},on:{click:e.editAccount}},[e._v("Edit Account")])]:e._e()]:[a("v-btn",{attrs:{to:"/logIn",text:""}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-account-circle")]),e._v("Login ")],1),a("v-btn",{attrs:{to:"/signUp",text:""}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-account-plus")]),e._v("Sign Up ")],1)]],2),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.deleteOption,callback:function(t){e.deleteOption=t},expression:"deleteOption"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Delete Account")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-text-field",{attrs:{"append-icon":e.showpassword?"mdi-eye":"mdi-eye-off",type:e.showpassword?"text":"password",label:"Confirm password to delete account","prepend-icon":"mdi-lock"},on:{"click:append":function(t){e.showpassword=!e.showpassword}},model:{value:e.confirmpassword,callback:function(t){e.confirmpassword=t},expression:"confirmpassword"}})],1)],1)],1)],1),a("v-card-actions",{staticStyle:{"background-color":"#1976d2"}},[a("v-spacer"),a("v-btn",{attrs:{color:"white",text:""},on:{click:function(t){e.deleteOption=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"white",text:""},on:{click:e.deleteAccount,hideDeleteOptions:function(t){e.deleteOption=!1}}},[e._v("Delete")])],1)],1)],1)],1)},l=[],u=(a("b0c0"),a("ac1f"),a("5319"),a("8aa5")),d=a.n(u),m={name:"App",computed:Object(o["a"])({},Object(i["b"])({user:"user"})),data:function(){return{confirmpassword:"",showpassword:!1,deleteOption:!1,enableOptions:!1,db:d.a.firestore()}},methods:{signOut:function(){var e=this;d.a.auth().signOut().then((function(){"forums"!==e.$route.name&&(console.log(e.user),e.$router.replace({name:"forums"}))}))},deleteAccount:function(){var e=this;this.db.collection("entries").get().then((function(t){for(var a=!0,r=0;r<t.length&&a;r++){var n=t.docs[r];n.data().creator.id===e.user.data.email&&(a=!1)}if(a){var s=d.a.auth().currentUser,o=s.email,i=d.a.auth.EmailAuthProvider.credential(o,e.confirmpassword);s.reauthenticateWithCredential(i).then((function(){var t=e.db;s.delete().then((function(){t.collection("users").doc(o).delete()})).catch((function(e){console.log(e.message)}))}))}e.deleteOption=!1})).catch((function(e){console.log(e.message)}))},editAccount:function(){this.$router.replace({name:"updateAccount"})}}},f=m,p=(a("1af0"),a("2877")),v=Object(p["a"])(f,c,l,!1,null,"7fab725a",null),h=v.exports,b={name:"App",computed:Object(o["a"])({},Object(i["b"])({user:"user"})),methods:{},components:{Toolbar:h}},w=b,g=(a("034f"),Object(p["a"])(w,n,s,!1,null,null,null)),y=g.exports,x=a("8c4f"),_=a("ce5b"),S=a.n(_);a("bf40");r["default"].use(S.a,{customProperties:!0,iconfont:"md"});var k=new S.a;r["default"].use(i["a"]);var j=new i["a"].Store({state:{user:{loggedIn:!1,data:null}},getters:{user:function(e){return e.user}},mutations:{SET_LOGGED_IN:function(e,t){e.user.loggedIn=t},SET_USER:function(e,t){e.user.data=t}},actions:{fetchUser:function(e,t){var a=e.commit;a("SET_LOGGED_IN",null!==t),a("SET_USER",t?{displayName:t.name,email:t.email}:null)}}}),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,"item-key":"id",search:e.search,"custom-filter":e.filterText,"calculate-widths:true":""},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0}])})],1)},E=[],C=(a("4160"),a("c975"),a("d3b7"),a("25f0"),a("159b"),a("e71f"),{apiKey:"AIzaSyArobpOXgv24xU0IoYWoBAMrZheNxd5S20",authDomain:"webforumvue.firebaseapp.com",databaseURL:"https://webforumvue.firebaseio.com",projectId:"webforumvue",storageBucket:"webforumvue.appspot.com",messagingSenderId:"662633985301",appId:"1:662633985301:web:9aa86893e0d28b0385a51c",measurementId:"G-ZGXT3BLDJ8"});u["initializeApp"](C),u["auth"]().onAuthStateChanged((function(e){j.dispatch("fetchUser",e)}));var D=u,T={data:function(){return{db:D.firestore(),users:[],search:""}},computed:{headers:function(){return[{text:"Name",sortable:!0,value:"name",align:"center"},{text:"Last Name",sortable:!0,value:"lastname",align:"center"},{text:"Email",sortable:!0,value:"email",align:"center"},{text:"Active",sortable:!0,value:"active",align:"center"}]}},methods:{filterText:function(e,t){return null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().indexOf(t)},refresh:function(){var e=this;this.db.collection("users").get().then((function(t){t.forEach((function(t){var a={name:t.data().name,lastname:t.data().lastname,email:t.id,active:t.data().active};e.users.push(a)}))}))}},mounted:function(){this.refresh()}},F=T,A=Object(p["a"])(F,O,E,!1,null,null,null),P=A.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",{staticClass:"LoginDiv"},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[null!=e.newForumStatus?a("v-alert",{attrs:{type:e.newForumStatus.type,outlined:"",text:"",icon:e.newForumStatus.icon,transition:"scale-transition"}},[e._v(e._s(e.newForumStatus.message))]):e._e(),a("div",{staticClass:"forums"},[a("v-toolbar",{staticStyle:{"background-color":"#1976d2"}},[a("v-toolbar-title",[e._v("Forums")]),a("v-spacer"),a("v-dialog",{model:{value:e.add,callback:function(t){e.add=t},expression:"add"}},[e.add?a("newforumform",{on:{notifyNewForum:e.forumAdded,notifyNewForumStatus:e.showNewForumStatus}}):e._e()],1),e.user.loggedIn?a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"blue"},on:{click:function(t){e.add=!e.add}}},[a("v-icon",[e._v(e._s(e.add?"mdi-minus":"mdi-plus"))])],1):e._e()],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.forums,"item-key":"id",search:e.search,"custom-filter":e.filterText,"align-center":""},scopedSlots:e._u([{key:"item.creation_date",fn:function(t){var r=t.item;return[a("p",[e._v(e._s(e._f("formatDate")(r.creation_date)))])]}},e.user.loggedIn?{key:"item.actions",fn:function(t){var r=t.item;return[a("div",{staticClass:"itemAction"},[a("v-icon",{attrs:{color:"blue"},on:{click:function(t){return e.moreDetails(r)}}},[e._v("mdi-arrow-right-bold-circle-outline")]),e.verifyDelete(r.creator)?a("v-icon",{attrs:{color:"red"},on:{click:function(t){return e.deleteForum(r)}}},[e._v("mdi-trash-can-outline")]):e._e()],1)]}}:null,{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Search Forum"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1)},$=[],I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"","align-center":""}},[a("v-spacer"),a("v-toolbar-title",{staticClass:"toolbarTitle"},[e._v("New Forum")]),a("v-spacer")],1),a("v-card-text",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Forum Title",type:"text",counter:100,rules:e.titleRules},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{outlined:"",counter:300,label:"Forum Subject",rules:e.subjectRules},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1)],1),a("v-spacer",[a("v-btn",{attrs:{type:"submit",disabled:!e.valid,outlined:"",color:"primary"},on:{click:e.addForum}},[a("v-icon",[e._v("mdi-login-variant")])],1)],1)],1)],1)],1)},N=[],U={data:function(){return{newForumStatus:null,db:D.firestore(),valid:!0,title:"",subject:"",titleRules:[function(e){return!!e||"Title is required"},function(e){return e.length<=100||"Title must be less than 100 characters"}],subjectRules:[function(e){return!!e||"Subject is required"},function(e){return e.length<=300||"Title must be less than 300 characters"}]}},methods:{addForum:function(){var e=this,t=D.auth().currentUser;t&&this.db.collection("params").doc("lastEntryId").get().then((function(a){var r=(parseInt(a.data().value)+1).toString();e.db.collection("entries").doc(r).set({creation_date:new Date(Date.now()),id:r,creator:e.db.collection("users").doc(t.email),parent:null,title:e.title,subject:e.subject}).catch((function(e){this.newForumStatus={type:"error",message:e.message,icon:"mdi-skull-outline"}})),e.title="",e.subject="",null===e.newForumStatus&&(e.db.collection("params").doc("lastEntryId").set({value:r}),e.$emit("notifyNewForum"),e.newForumStatus={type:"success",message:"The forum was created successfully",icon:"mdi-checkbox-marked-circle-outline"}),e.$emit("notifyNewForumStatus",e.newForumStatus)}))}}},L=U,q=(a("a5ff"),Object(p["a"])(L,I,N,!1,null,"e6c3400c",null)),z=q.exports,G={data:function(){return{db:D.firestore(),forums:[],search:"",add:!1,newForumStatus:null}},computed:Object(o["a"])({headers:function(){return[{text:"Title",sortable:!0,value:"title",align:"center"},{text:"Creator",sortable:!0,value:"creator.id",align:"center"},{text:"Creation Date",sortable:!0,value:"creation_date",align:"center"},{text:"",value:"actions",sortable:!1,align:"center"}]}},Object(i["b"])({user:"user"})),components:{newforumform:z},methods:{filterText:function(e,t){return null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().indexOf(t)},refresh:function(){var e=this;this.forums=[],this.add=!1,this.db.collection("entries").get().then((function(t){t.forEach((function(t){null===t.data().parent&&e.forums.push(t.data())}))}))},moreDetails:function(e){return this.$router.push({path:"/forums/forum/"+e.id})},forumAdded:function(){this.add=!1,this.refresh()},deleteForum:function(e){var t=this;this.db.collection("entries").get().then((function(a){var r=!1;if(a.forEach((function(t){null!=t.data().parent&&t.data().parent.id===e.id&&(r=!0)})),r){var n={type:"error",message:"Forums with entries can't be deleted",icon:"mdi-skull-outline"};t.showNewForumStatus(n)}else t.db.collection("entries").doc(e.id).delete().then((function(){console.log("Document successfully deleted!"),t.refresh()})).catch((function(e){console.error("Error removing document: ",e)}))}))},verifyDelete:function(e){return this.user.data.email===e.id},showNewForumStatus:function(e){var t=this;this.newForumStatus=e,setTimeout((function(){return t.newForumStatus=null}),3e3)}},filters:{formatDate:function(e){return e?new Date(1e3*e.seconds).toLocaleDateString("es-ES"):""}},mounted:function(){this.refresh()}},M=G,W=(a("a7a1"),Object(p["a"])(M,R,$,!1,null,"54aec8d2",null)),B=W.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",{staticClass:"LoginDiv"},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs14:"",sm12:"",md10:""}},[null!=e.status?a("v-alert",{attrs:{type:e.status.type,outlined:"",text:"",icon:e.status.icon,transition:"scale-transition"}},[e._v(e._s(e.status.message))]):e._e(),a("v-card",{staticClass:"elevation-12",staticStyle:{"margin-bottom":"5%"}},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"","align-center":""}},[a("v-btn",{attrs:{to:"/forums",icon:""}},[a("v-icon",{attrs:{"x-large":""}},[e._v("mdi-arrow-left-circle")])],1),a("v-spacer"),a("v-toolbar-title",{staticClass:"toolbarTitle"},[e._v(e._s(e.forum.title))]),a("v-spacer")],1),a("v-card-subtitle",[a("v-row",{staticStyle:{margin:"0px"}},[a("v-col",{attrs:{cols:"6"}},[a("b",[e._v("Creation Date:")]),e._v(" "+e._s(e._f("formatDate")(e.forum.creation_date))+" ")]),a("v-col",{attrs:{cols:"6"}},[a("b",[e._v("Creator:")]),e._v(" "+e._s(e.forum.creator.id)+" ")])],1),a("hr")],1),a("v-card-text",[a("div",{staticClass:"forumSubject"}),a("p",{attrs:{align:"justify"}},[e._v(e._s(e.forum.subject))])]),a("v-card-actions",[a("v-spacer"),a("v-icon",{attrs:{large:"",color:"white",left:""},on:{click:function(t){e.reply=!0}}},[e._v("mdi-reply-all")])],1)],1),e._l(e.forum.entries,(function(t){return a("entry",{key:t.id,attrs:{entry:t},on:{refresh:e.refresh,showStatus:e.showStatus}})})),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.reply,callback:function(t){e.reply=t},expression:"reply"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Reply")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{outlined:"",counter:300,label:"Subject",rules:e.subjectRules},model:{value:e.replySubject,callback:function(t){e.replySubject=t},expression:"replySubject"}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"white",text:""},on:{click:function(t){e.reply=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"white",text:""},on:{click:e.replyToForum}},[e._v("Save")])],1)],1)],1)],1)],2)],1)],1)],1)},J=[],Y=(a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs14:"",sm12:"",md10:""}},[a("v-card",{staticClass:"elevation-4",staticStyle:{margin:"2% 0"}},[a("v-card-text",[a("div",{staticClass:"forumDetails"},[a("v-row",{staticStyle:{margin:"0px"}},[a("v-col",{attrs:{cols:"6"}},[a("b",[e._v("Creation Date:")]),e._v(" "+e._s(e._f("formatDate")(e.entry.creation_date))+" ")]),a("v-col",{attrs:{cols:"6"}},[a("b",[e._v("Creator:")]),e._v(" "+e._s(e.entry.creator)+" ")])],1),a("hr")],1),a("div",{staticClass:"forumSubject"}),a("v-textarea",{attrs:{rules:e.subjectRules,disabled:!e.edit,cleareable:"","no-resize":"",rows:"3"},model:{value:e.entry.subject,callback:function(t){e.$set(e.entry,"subject",t)},expression:"entry.subject"}},[e._v(e._s(e.entry.subject))])],1),a("v-card-actions",[a("v-spacer"),e.verifyEdit(e.entry.creator)&&!e.edit?a("v-icon",{on:{click:function(t){e.edit=!e.edit}}},[e._v("mdi-tooltip-edit-outline")]):e._e(),e.edit?a("v-icon",{attrs:{color:"green"},on:{click:e.save}},[e._v("mdi-check-circle-outline")]):e._e()],1)],1)],1)],1)],1)}),X=[],K={data:function(){return{db:D.firestore(),edit:!1,editStatus:null,subjectRules:[function(e){return!!e||"Subject is required"},function(e){return e.length<=300||"Title must be less than 300 characters"}]}},computed:Object(o["a"])({},Object(i["b"])({user:"user"})),props:["entry"],filters:{formatDate:function(e){return e?new Date(1e3*e.seconds).toLocaleDateString("es-ES"):""}},methods:{verifyEdit:function(e){return this.user.data.email===e},save:function(){if(this.db.collection("entries").doc(this.entry.id).set({subject:this.entry.subject},{merge:!0}).catch((function(e){var t={type:"error",message:e.message,icon:"mdi-skull-outline"};this.$emit("showStatus",t)})),this.edit=!1,null===this.editStatus){var e={type:"success",message:"Your reply was posted successfully",icon:"mdi-checkbox-marked-circle-outline"};this.$emit("refresh"),this.$emit("showStatus",e)}}}},H=K,Q=(a("8688"),Object(p["a"])(H,Y,X,!1,null,"9c70806a",null)),V=Q.exports,ee={computed:Object(o["a"])({},Object(i["b"])({user:"user"})),data:function(){return{replyStatus:"",reply:!1,replySubject:"",db:D.firestore(),status:null,forum:{title:"",subject:"",creation_date:"",entries:[],creator:""},subjectRules:[function(e){return!!e||"Subject is required"},function(e){return e.length<=300||"Title must be less than 300 characters"}]}},methods:{replyToForum:function(){var e=this;this.user&&this.db.collection("params").doc("lastEntryId").get().then((function(t){var a=(parseInt(t.data().value)+1).toString();if(e.db.collection("entries").doc(a).set({creation_date:new Date(Date.now()),id:a,creator:e.user.data.email,parent:e.db.doc("entries/"+e.forum.id),subject:e.replySubject}).catch((function(e){var t={type:"error",message:e.message,icon:"mdi-skull-outline"};this.showStatus(t)})),e.replySubject="",null===e.status){e.db.collection("params").doc("lastEntryId").set({value:a}),e.reply=!1;var r={type:"success",message:"Your reply was posted successfully",icon:"mdi-checkbox-marked-circle-outline"};e.refresh(),e.showStatus(r)}}))},refresh:function(){var e=this;this.db.collection("entries").get().then((function(t){var a=[];t.forEach((function(t){t.data().id===e.$route.params.id?(console.log(t),e.forum=t.data()):null!==t.data().parent&&t.data().parent.id===e.$route.params.id&&a.push(t.data())})),e.forum.entries=a.sort((function(e,t){return e.creation_date-t.creation_date}))})).catch((function(e){console.log(e.message)}))},orderByNumber:function(e,t){-1!=t&&1!=t&&(t=1),this.sort((function(a,r){return(a[e]-r[e])*t}))},showStatus:function(e){var t=this;this.status=e,setTimeout((function(){return t.status=null}),3e3)}},mounted:function(){this.refresh()},filters:{formatDate:function(e){return e?new Date(1e3*e.seconds).toLocaleDateString("es-ES"):""}},components:{entry:V}},te=ee,ae=(a("825b"),Object(p["a"])(te,Z,J,!1,null,"509af422",null)),re=ae.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",{staticClass:"LoginDiv"},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"","align-center":""}},[a("v-spacer"),a("v-toolbar-title",{staticClass:"toolbarTitle"},[e._v(" Login ")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Email","prepend-icon":"mdi-account",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.showpassword?"mdi-eye":"mdi-eye-off",type:e.showpassword?"text":"password",label:"Password","prepend-icon":"mdi-lock"},on:{"click:append":function(t){e.showpassword=!e.showpassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-spacer",[a("v-btn",{attrs:{type:"submit",outlined:"",color:"primary"},on:{click:function(t){return e.logIn()}}},[a("v-icon",[e._v("mdi-login-variant")])],1)],1)],1),a("v-spacer",[e._v(" Don't have an account? "),a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"/signUp"}},[e._v("SignUp.")])]),a("v-card-actions")],1)],1)],1)],1)],1)},se=[],oe=(a("498a"),{data:function(){return{email:"",password:"",showpassword:!1,error:null}},methods:{logIn:function(){var e=this;D.auth().signInWithEmailAndPassword(this.email.trim(),this.password).then((function(){e.$router.replace({name:"forums"})})).catch((function(t){alert(t.message),e.error=t.message}))}}}),ie=oe,ce=(a("72ec"),Object(p["a"])(ie,ne,se,!1,null,"1cd7bf15",null)),le=ce.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",{staticClass:"LoginDiv"},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e.user?a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"","align-center":""}},[a("v-spacer"),a("v-toolbar-title",{staticClass:"toolbarTitle"},[e._v(" Sign Up ")]),a("v-spacer")],1),a("v-card-text",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{label:"Name",required:"",rules:e.nameRules,"prepend-icon":"mdi-account-circle",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Lastname",required:"",rules:e.lastnameRules,"prepend-icon":"mdi-account-circle",type:"text"},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}}),a("v-text-field",{attrs:{label:"Email",required:"",rules:e.emailRules,"prepend-icon":"mdi-email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.showpassword?"mdi-eye":"mdi-eye-off",type:e.showpassword?"text":"password",rules:e.passwordRules,label:"Password","prepend-icon":"mdi-lock"},on:{"click:append":function(t){e.showpassword=!e.showpassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer",[a("v-btn",{attrs:{type:"submit",outlined:"",color:"primary",disabled:!e.valid},on:{click:e.signUp}},[e._v("Submit "),a("v-icon",{attrs:{right:""}},[e._v("mdi-login-variant")])],1)],1)],1)],1):e._e()],1)],1)],1)],1)},de=[],me={data:function(){return{db:D.firestore(),name:"",lastname:"",email:"",password:"",valid:!0,showpassword:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e.length>3||"Name must be longer than 3 characters"}],lastnameRules:[function(e){return!!e||"Lastname is required"},function(e){return e.length>3||"Name must be longer than 3 characters"}],emailRules:[function(e){return!!e||"Email is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Email must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return/^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$/.test(e)||"The password must contain at least 8 and no more than 16 characters, at least one digit, at least one lower case and at least one upper case.\nIt can NOT have any other symbol."}]}},methods:{signUp:function(){var e=this;D.auth().createUserWithEmailAndPassword(this.email,this.password).then((function(){e.db.collection("users").doc(e.email.toLowerCase()).set({name:e.name,lastname:e.lastname,active:!0}).then((function(){e.$router.replace({name:"forums"})})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))}},computed:Object(o["a"])({},Object(i["b"])({user:"user"}))},fe=me,pe=(a("a385"),Object(p["a"])(fe,ue,de,!1,null,null,null)),ve=pe.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",{staticClass:"LoginDiv"},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e.user?a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:"","align-center":""}},[a("v-spacer"),a("v-toolbar-title",{staticClass:"toolbarTitle"},[e._v(" Update Account ")]),a("v-spacer")],1),a("v-card-text",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{label:"Name",required:"",rules:e.nameRules,"prepend-icon":"mdi-account-circle",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Lastname",required:"",rules:e.lastnameRules,"prepend-icon":"mdi-account-circle",type:"text"},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}}),a("v-text-field",{attrs:{label:"Email",required:"",rules:e.emailRules,"prepend-icon":"mdi-email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.showCurrentPassword?"mdi-eye":"mdi-eye-off",type:e.showCurrentPassword?"text":"password",rules:e.passwordRules,label:"Current Password","prepend-icon":"mdi-lock"},on:{"click:append":function(t){e.showCurrentPassword=!e.showCurrentPassword}},model:{value:e.currentPassword,callback:function(t){e.currentPassword=t},expression:"currentPassword"}}),a("v-text-field",{attrs:{"append-icon":e.showpassword?"mdi-eye":"mdi-eye-off",type:e.showpassword?"text":"password",rules:e.passwordRules,label:"New Password","prepend-icon":"mdi-lock"},on:{"click:append":function(t){e.showpassword=!e.showpassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer",[a("v-btn",{attrs:{type:"submit",outlined:"",color:"primary",disabled:!e.valid},on:{click:e.updateAccount}},[e._v("submit "),a("v-icon",{attrs:{right:""}},[e._v("mdi-login-variant")])],1)],1)],1)],1):e._e()],1)],1)],1)],1)},be=[],we={data:function(){return{db:D.firestore(),name:"",lastname:"",email:"",password:"",currentPassword:"",submitted:!1,valid:!0,showpassword:!1,showCurrentPassword:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e.length>3||"Name must be longer than 3 characters"}],lastnameRules:[function(e){return!!e||"Lastname is required"},function(e){return e.length>3||"Name must be longer than 3 characters"}],emailRules:[function(e){return!!e||"Email is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Email must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return/^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$/.test(e)||"The password must contain at least 8 and no more than 16 characters, at least one digit, at least one lower case and at least one upper case.\nIt can NOT have any other symbol."}]}},methods:{refresh:function(){var e=this,t=D.auth().currentUser;this.db.collection("users").doc(t.email).get().then((function(t){e.name=t.data().name,e.lastname=t.data().lastname,e.email=t.id})).catch((function(e){console.log(e.message)}))},updateAccount:function(){var e=this,t=D.auth().currentUser,a=D.auth.EmailAuthProvider.credential(t.email,this.currentPassword),r=t.email.toString();t.reauthenticateWithCredential(a).then((function(){if(r!=e.email){var a=e.db,n=e.email,s=e.name,o=e.lastname;t.updateEmail(e.email).then((function(){console.log("Se actualizó el email"),a.collection("users").doc(r).get().then((function(e){var t=s,i=o,c=e.data().active;console.log("Email nuevo: "+n),console.log("Email viejo: "+r),console.log(e),a.collection("users").doc(n).set({name:t,lastname:i,active:c}).then((function(){console.log("se creó un documento nuevo"),a.collection("users").doc(r).delete()})).catch((function(e){console.log("Erro al crear doc nuevo :"+e.message)}))})),console.log("updatedemail")})).catch((function(e){console.log(e.message)}))}t.updatePassword(e.password).then((function(){console.log("updatedpassword")})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))}},computed:Object(o["a"])({},Object(i["b"])({user:"user"})),mounted:function(){this.refresh()}},ge=we,ye=(a("f6a7"),Object(p["a"])(ge,he,be,!1,null,null,null)),xe=ye.exports;r["default"].use(x["a"]);var _e=new x["a"]({mode:"history",routes:[{path:"/",redirect:"/forums"},{path:"/users",name:"users",component:P},{path:"/forums",name:"forums",component:B},{path:"/forums/forum/:id",name:"forum",component:re},{path:"/logIn",name:"logIn",component:le},{path:"/signUp",name:"signUp",component:ve},{path:"/updateAccount",name:"updateAccount",component:xe}],linkActiveClass:"active"});r["default"].config.productionTip=!1,r["default"].use(x["a"]),new r["default"]({vuetify:k,router:_e,store:j,render:function(e){return e(y)}}).$mount("#app")},"72ec":function(e,t,a){"use strict";var r=a("aa7a"),n=a.n(r);n.a},"7c51":function(e,t,a){},"825b":function(e,t,a){"use strict";var r=a("aa77"),n=a.n(r);n.a},"85ec":function(e,t,a){},8688:function(e,t,a){"use strict";var r=a("8d5e"),n=a.n(r);n.a},"8d5e":function(e,t,a){},a385:function(e,t,a){"use strict";var r=a("41b8"),n=a.n(r);n.a},a5ff:function(e,t,a){"use strict";var r=a("7c51"),n=a.n(r);n.a},a7a1:function(e,t,a){"use strict";var r=a("d85d"),n=a.n(r);n.a},aa77:function(e,t,a){},aa7a:function(e,t,a){},d85d:function(e,t,a){},f6a7:function(e,t,a){"use strict";var r=a("150d"),n=a.n(r);n.a}});
//# sourceMappingURL=app.dfa3c1b5.js.map